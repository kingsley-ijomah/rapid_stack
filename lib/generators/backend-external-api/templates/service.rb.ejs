require "httparty"

module ExternalApi
  class <%= pascalCaseName %>Service
    BASE_URL = "<%= baseUrl %>"
    ENDPOINT = "<%= endpoint %>"
    API_KEY = ENV["<%= apiKeyEnvVar %>"]

    def self.<%= camelCaseName %>(query)
      response = HTTParty.get(
        "#{BASE_URL}#{ENDPOINT}",
        query: {
          api_key: API_KEY,
          query: query
        }
      )

      if response.success?
        response.parsed_response
      else
        raise ExternalApi::Error, "<%= pascalCaseName %> API request failed: #{response.code}"
      end
    end
  end
end 